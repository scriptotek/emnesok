<!-- SEARCH.HTML -->

<div class="input-group">
	<div class="input-group-btn" uib-dropdown uib-keyboard-nav>
		<button id="simple-btn-keyboard-nav" type="button" class="truncate_button btn btn-default" uib-dropdown-toggle translate>
			{{vm.truncations[vm.truncate]}} <span class="caret"></span>
		</button>
		<ul class="uib-dropdown-menu" role="menu" aria-labelledby="simple-btn-keyboard-nav">
            <li role="menuitem" ng-repeat="truncation in vm.truncations"><a href ng-click="vm.searchTruncation($index)" translate>{{truncation}}</a></li>
		</ul>
	</div>

	<uib-alert type="danger" ng-show="vm.errorMsg">
		<span translate>An error occured:</span>
		{{ vm.errorMsg | translate }}
	</uib-alert>

	<div id="search" angucomplete-alt ng-keypress="($event.which === 13)?vm.enterKey():0" placeholder="{{'Enter a subject' | translate}}" maxlength="50" 
		pause="400"
		selected-object="vm.selectSubject" 
		remote-api-handler="vm.search"
		focus-in="vm.openSearcMenu()"
		title-field="prefLabel"
		description-field="description"
		minlength="2"
		input-class="form-control form-control-small"
		match-class="highlight"
		clear-selected="true"
		image-field="searchListIcon"
		focus-first="true"
		template-url="templates/search-list-template.html"
		text-no-results="{{'No hits :(' | translate}}"
		text-searching="{{'Lookingâ€¦' | translate}}"
	></div>

</div>


<h3>Active subject</h3>

	<div class="alert alert-danger" ng-show="vm.error">{{vm.error}}</div>

	<mod-subject ng-show="vm.searchHistory.length" subject-data="vm.searchHistory[vm.searchHistory.length-1]"></mod-subject>

<h3>Search history</h3>

<div class="search_history" ng-show="vm.searchHistory.length > 1">

	<mod-subject ng-repeat="subject in vm.searchHistory.slice(0, vm.searchHistory.length-1).reverse()" subject-data="subject"></mod-subject>

</div>
